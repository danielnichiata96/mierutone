# Mierutone - Product Roadmap

## VisÃ£o do Produto

**Problema:** "Estudei japonÃªs por anos mas ainda soo estrangeiro"

**SoluÃ§Ã£o:** Sistema de treino de pronÃºncia com feedback visual e mensurÃ¡vel

**Diferencial:** NÃ£o Ã© dicionÃ¡rio (OJAD). Ã‰ **ferramenta de treino ativo**.

---

## Como Features Viram SaaS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JORNADA DO USUÃRIO                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. DESCOBERTA        2. ENTENDIMENTO       3. PRÃTICA         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚  "Como se fala X?"    "Ah, tem padrÃ£o!"     "Deixa eu tentar"  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ AnÃ¡lise   â”‚   â†’    â”‚ Mora/Type â”‚   â†’    â”‚ Record &  â”‚       â”‚
â”‚  â”‚ de Texto  â”‚        â”‚ Breakdown â”‚        â”‚ Compare   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚       â”‚                     â”‚                    â”‚              â”‚
â”‚       â–¼                     â–¼                    â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Furigana  â”‚        â”‚ Pitch Viz â”‚        â”‚ Score +   â”‚       â”‚
â”‚  â”‚ + Leitura â”‚        â”‚ + Ãudio   â”‚        â”‚ Feedback  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                  â”‚              â”‚
â”‚                                                  â–¼              â”‚
â”‚                              4. PROGRESSO                       â”‚
â”‚                              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚                              "Estou melhorando!"                â”‚
â”‚                                                                 â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                              â”‚ HistÃ³rico â”‚  â† LOCK-IN          â”‚
â”‚                              â”‚ + Stats   â”‚  â† RETENÃ‡ÃƒO         â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â† MONETIZAÃ‡ÃƒO      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Plano de Estudo (Produto)

### Estrutura de Aprendizado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PITCH ACCENT MASTERY                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  NÃVEL 1: Fundamentos                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚  â–¡ Entender moras vs sÃ­labas                                   â”‚
â”‚  â–¡ Reconhecer HIGH vs LOW                                      â”‚
â”‚  â–¡ Praticar: Cumprimentos (ãŠã¯ã‚ˆã†, ã“ã‚“ã«ã¡ã¯)                  â”‚
â”‚                                                                 â”‚
â”‚  NÃVEL 2: PadrÃµes BÃ¡sicos                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚  â–¡ å¹³æ¿å‹ (heiban) - Flat pattern                              â”‚
â”‚  â–¡ é ­é«˜å‹ (atamadaka) - Head-high                              â”‚
â”‚  â–¡ Praticar: NÃºmeros, dias da semana                           â”‚
â”‚                                                                 â”‚
â”‚  NÃVEL 3: PadrÃµes AvanÃ§ados                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚  â–¡ ä¸­é«˜å‹ (nakadaka) - Middle-high                             â”‚
â”‚  â–¡ å°¾é«˜å‹ (odaka) - Tail-high                                  â”‚
â”‚  â–¡ Praticar: Verbos, adjetivos                                 â”‚
â”‚                                                                 â”‚
â”‚  NÃVEL 4: Pares MÃ­nimos                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚  â–¡ ç®¸/æ©‹/ç«¯ (hashi variations)                                 â”‚
â”‚  â–¡ é›¨/é£´ (ame variations)                                      â”‚
â”‚  â–¡ Praticar: Context sentences                                 â”‚
â”‚                                                                 â”‚
â”‚  NÃVEL 5: FluÃªncia                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  â–¡ Frases longas com mÃºltiplos padrÃµes                         â”‚
â”‚  â–¡ Velocidade natural                                          â”‚
â”‚  â–¡ Praticar: DiÃ¡logos, news                                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Features por Fase

### âœ… Fase 1 - MVP (Completo)
- [x] AnÃ¡lise de texto â†’ Pitch visualization
- [x] TTS com Azure Speech
- [x] Play button nos cards

### âœ… Fase 2 - Record & Compare (Completo)
- [x] GravaÃ§Ã£o no browser
- [x] DTW comparison
- [x] Score 0-100

### âœ… Fase 3 - AnÃ¡lise Rica (Completo)

**Objetivo:** Transformar anÃ¡lise simples em ferramenta de estudo

| Feature | DescriÃ§Ã£o | Tech | Status |
|---------|-----------|------|--------|
| **Mora Breakdown** | ã¨\|ã†\|ãã‚‡\|ã† (visual) | sudachipy | âœ… Done |
| **Furigana** | æ±äº¬(ã¨ã†ãã‚‡ã†) | sudachipy | âœ… Done |
| **Accent Type** | å¹³æ¿å‹, é ­é«˜å‹, etc. | Kanjium DB | âœ… Done |
| **Word Segmentation** | Colorir por palavra | sudachipy | âœ… Done |
| **Part of Speech** | åè©, å‹•è©, etc. | sudachipy | âœ… Done |

### âœ… Fase 3.5 - TransparÃªncia & Compostos (Completo)

**Objetivo:** Mostrar confianÃ§a nos dados e analisar palavras compostas

| Feature | DescriÃ§Ã£o | Status |
|---------|-----------|--------|
| **Source Types** | dictionary, dictionary_lemma, particle, compound_rule, etc. | âœ… Done |
| **Confidence Levels** | high/medium/low com visual (solid/dashed/dotted) | âœ… Done |
| **UniDic Cross-validation** | Valida accent com segunda fonte | âœ… Done |
| **Word Origin (Goshu)** | å’Œèª, æ¼¢èª, å¤–æ¥èª, å›ºæœ‰åè© | âœ… Done |
| **Compound Analysis** | Detecta componentes via Mode.A split | âœ… Done |
| **McCawley Rules** | Prediz accent de compostos (N2â‰¤2, N2=3-4, N2â‰¥5) | âœ… Done |
| **PhraseFlow** | VisualizaÃ§Ã£o de pitch conectado entre palavras | âœ… Done |
| **Riso Palette** | coral (H), cornflower (L), black (neutral) | âœ… Done |

**Endpoint atual:** `POST /api/analyze` retorna:
```json
{
  "text": "æ±äº¬å¤§å­¦",
  "words": [
    {
      "surface": "æ±äº¬å¤§å­¦",
      "reading": "ã¨ã†ãã‚‡ã†ã ã„ãŒã",
      "morae": ["ã¨", "ã†", "ãã‚‡", "ã†", "ã ", "ã„", "ãŒ", "ã"],
      "accent_type": 5,
      "mora_count": 8,
      "pitch_pattern": ["L", "H", "H", "H", "H", "L", "L", "L"],
      "part_of_speech": "åè©",
      "origin": "kango",
      "origin_jp": "æ¼¢èª",
      "lemma": "æ±äº¬å¤§å­¦",
      "source": "dictionary",
      "confidence": "high",
      "warning": null,
      "is_compound": true,
      "components": [
        {"surface": "æ±äº¬", "reading": "ã¨ã†ãã‚‡ã†", "accent_type": 0, "mora_count": 4, "part_of_speech": "åè©", "reliable": true},
        {"surface": "å¤§å­¦", "reading": "ã ã„ãŒã", "accent_type": 0, "mora_count": 4, "part_of_speech": "åè©", "reliable": true}
      ]
    }
  ]
}
```

### ğŸ“‹ Fase 4 - ConteÃºdo Guiado â† **PRÃ“XIMO**

**Objetivo:** UsuÃ¡rio nÃ£o precisa pensar "o que praticar"

- [ ] **Biblioteca de Exemplos**
  - Cumprimentos (10 frases)
  - NÃºmeros (1-100, contadores)
  - Verbos comuns (50 verbos)
  - Pares mÃ­nimos (20 pares)

- [ ] **Decks TemÃ¡ticos**
  - Business Japanese
  - Travel Japanese
  - JLPT N5-N1 vocabulary

- [ ] **Daily Challenge**
  - 5 palavras/dia
  - Streak counter
  - NotificaÃ§Ã£o

### ğŸ“‹ Fase 5 - Progresso & MonetizaÃ§Ã£o

**Objetivo:** Criar valor que justifica pagamento

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FREE vs PRO                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  FREE                          PRO ($9/mÃªs)                    â”‚
â”‚  â”€â”€â”€â”€                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”‚  â€¢ 5 anÃ¡lises/dia              â€¢ Ilimitado                     â”‚
â”‚  â€¢ Sem histÃ³rico               â€¢ HistÃ³rico completo            â”‚
â”‚  â€¢ Score bÃ¡sico                â€¢ Feedback detalhado            â”‚
â”‚  â€¢ Exemplos limitados          â€¢ Todos os decks                â”‚
â”‚                                â€¢ Export para Anki              â”‚
â”‚                                â€¢ Suporte prioritÃ¡rio           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- [ ] **Auth** (Clerk/Supabase)
- [ ] **HistÃ³rico de PrÃ¡tica**
  - Scores por palavra
  - GrÃ¡fico de evoluÃ§Ã£o
  - Palavras problemÃ¡ticas
- [ ] **Stripe Integration**
- [ ] **Usage Limits**

---

## Stack TÃ©cnica

### Backend (Python/FastAPI)
```
Libs atuais:
â”œâ”€â”€ sudachipy + sudachidict-full (tokenization, Mode C/A)
â”œâ”€â”€ fugashi + unidic (cross-validation, goshu)
â”œâ”€â”€ azure-cognitiveservices-speech (TTS)
â”œâ”€â”€ parselmouth (pitch extraction)
â”œâ”€â”€ fastdtw (comparison)
â”œâ”€â”€ redis (TTS cache)
â””â”€â”€ pydantic (validation)

Database:
â””â”€â”€ pitch.db (Kanjium 124k+ entries) via mierutone-dictionary

Futuro:
â”œâ”€â”€ pyopenjtalk (phonemes/IPA)
â””â”€â”€ cloudflare R2 (cold storage produÃ§Ã£o)
```

### Frontend (Next.js 14)
```
Atual:
â”œâ”€â”€ React + TypeScript
â”œâ”€â”€ Tailwind CSS (Riso palette)
â”œâ”€â”€ Web Audio API (recording)
â””â”€â”€ pitch/ components (shared PitchDot, PitchGlow)

Adicionar:
â”œâ”€â”€ Framer Motion (animaÃ§Ãµes)
â”œâ”€â”€ Clerk (auth)
â””â”€â”€ PostHog (analytics)
```

### Infra
```
Backend: Railway ou Render
Frontend: Vercel
Cache: Redis (local) / Upstash (prod)
DB: Supabase (auth + histÃ³rico)
Payments: Stripe
Dictionary: GitHub Releases (mierutone-dictionary)
```

---

## MÃ©tricas de Sucesso

| MÃ©trica | Target Fase 3.5 | Target Fase 5 |
|---------|-----------------|---------------|
| DAU | 100 | 1,000 |
| Retention D7 | 20% | 40% |
| Conversion Freeâ†’Pro | - | 5% |
| MRR | $0 | $2,000 |

---

## PrÃ³ximo Passo Imediato

**Fase 3.5 estÃ¡ completa!** Sistema tem:
- TransparÃªncia total (source, confidence, warnings)
- AnÃ¡lise de compostos com McCawley rules
- Cross-validation UniDic
- PhraseFlow com pitch conectado
- Visual design consistente (Riso palette)

PrÃ³ximos passos sÃ£o **Fase 4 - ConteÃºdo Guiado**:

1. **Criar biblioteca de exemplos** (JSON estÃ¡tico inicial)
   - Cumprimentos (10 frases)
   - NÃºmeros bÃ¡sicos
   - Pares mÃ­nimos clÃ¡ssicos (ç®¸/æ©‹/ç«¯, é›¨/é£´)

2. **UI para selecionar exemplos**
   - Cards com categorias
   - Click para preencher input

3. **Daily Challenge** (opcional)
   - 5 palavras/dia
   - Streak counter

---

## Edge Cases para V2

- HeibanizaÃ§Ã£o de nomes prÃ³prios em compostos
- Sufixos especiais (~çš„, ~ä¸­, ~æ€§)
- VariaÃ§Ã£o regional de pitch
- Compostos com 3+ componentes (iterative reduction jÃ¡ implementado)
